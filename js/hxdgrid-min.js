(function(){function n(a){window.getHxGridObj=function(d){return a[d]};window.getHxItemById=function(d){try{var b=d.split("@");return"undefined"===typeof a[parseInt(b[1])].items[parseInt(b[0])]?(new p("HxdGrid->Access error. Invalid item id. Itemuid: "+b[0]+" RAW:"+d),0):a[parseInt(b[1])].items[parseInt(b[0])]}catch(c){throw new l("HxdGrid->Access error. Invalid ID format. The correct format is ITEMuid@GRIDuid. Current input "+d+". Exception details "+c);}}}function u(a){function d(){200>new Date-
b?setTimeout(d,200):c=!1;a.resizeEvent()}var b,c=!1;window.addEventListener("resize",function(a){b=new Date;!1===c&&(c=!0,setTimeout(d,200))})}function v(a,d){for(var b,c=0,e=a.childNodes.length;c<e;c++)for(var f=void 0!=a.childNodes[c].className?a.childNodes[c].className.split(" "):[],h=0,k=f.length;h<k;h++)f[h]==d&&(b=a.childNodes[c]);return b}function w(a,d,b){a.innerHTML=d+a.innerHTML+b;return a}function q(a,d,b,c){setTimeout(function(){a.style[b]=d},"undefined"===typeof c?1E3:c)}function l(a){this.message=
a;this.name="HxdException"}function p(a){for(var d="assert cd clear count countReset debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd select table time timeEnd timeStamp timeline timelineEnd trace warn".split(" "),b=d.length,c=window.console=window.console||{},e,f=function(){};b--;)e=d[b],c[e]||(c[e]=f);c.log("------WARNING------");c.log(a)}var r=0,t=function(a,d,b){this.domElem=a;this.setOptions(d);this.create(this,b)};t.prototype={uid:0,domElem:null,
xCor:0,yCor:0,gridPadding:5,relW:1,relH:1,viewFade:!0,setOptions:function(a){this.viewFade=a&&a.viewFade||this.viewFade;this.autoBind=a&&a.autoBind||this.autoBind},addAttr:function(a,d){this.hasOwnProperty(a)?new p("HxdError -> Object function. Attempting to override property. Use setAttribute instead"):this[a]=d},passNodeAttributes:function(a){for(var d=0,b=a.length;d<b;d++){var c=a.item(d);-1<c.name.indexOf("data-hxd-")&&this.addAttr(c.name.replace("data-hxd-",""),c.value)}},create:function(a,d){a.relW=
Math.round(a.domElem.offsetWidth/d);a.relH=Math.round(a.domElem.offsetHeight/d);if(1<a.relW){var b=a.gridPadding/d*(a.relW-1);a.relW+=b;a.domElem.style.width=a.relW*d+"px"}1<a.relH&&(b=a.gridPadding/d*(a.relH-1),a.relH+=b,a.domElem.style.height=a.relH*d+"px")},getXY:function(){return[this.xCor,this.yCor]},swapPos:function(a,d){var b=this.getXY(),c=a.getXY();this.moveTo(c[0],c[1]);a.moveTo(b[0],b[1]);var c=this.uid.split("@")[0],b=this.domElem.parentNode,c="binaryShift"+c,e={0:this,1:a},f;document.createEvent?
(f=document.createEvent("HTMLEvents"),f.initEvent("dataavailable",!0,!0,e)):(f=document.createEventObject(),f.eventType="dataavailable");f.eventName=c;document.createEvent?b.dispatchEvent(f):b.fireEvent("on"+f.eventType,f);"undefined"!==typeof d&&d()},moveTo:function(a,d){var b=this.domElem;if("undefined"!==typeof b.getAttribute("style")&&"absolute"==b.style.position)this.animateOver(a,d);else{var c=b.getAttribute("style");b.setAttribute("style",c+"opacity:1;margin:0!important;float:none;position: absolute;left:"+
a+"px;top:"+d+"px")}this.xCor=a;this.yCor=d},animateOver:function(a,d,b){b=b||this.domElem;b.style.WebkitTransition="  all 0.7s ease ";b.style.MozTransition="  all 0.7s ease ";b.style.transition=" all 1s ease  ";a+="px";var c=d+"px";b.style.top<d?(b.style.left!=a&&(b.style.left=a),b.style.top!=c&&q(b,c,"top",1E3)):(b.style.top!=c&&(b.style.top=c),b.style.left!=a&&q(b,a,"left",1E3))},isElementInViewport:function(a,d){var b=this.domElem.getBoundingClientRect();return-100<=b.top&&-100<=b.left&&b.bottom<=
(window.innerHeight+100||document.documentElement.clientHeight+100)&&b.right<=(window.innerWidth+100||document.documentElement.clientWidth+100)},moveInViewport:function(a,d){var b=this.domElem.getBoundingClientRect(),c=parseInt(this.domElem.style.top)-d,e=parseInt(this.domElem.style.left)-a;return 0<=b.top-c&&0<=b.left-e&&b.bottom-c<=(window.innerHeight+0||document.documentElement.clientHeight+0)&&b.right-e<=(window.innerWidth+0||document.documentElement.clientWidth+0)}};var m=function(a,d){try{this.uid=
r;this.domElem=a;this.resizeLock=!0;this.items=[];var b;b=0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./)?!0:!1;b?a.className+="hxdGridContainer":a.classList.add("hxdGridContainer");a.setAttribute("style","list-style: none;width: 100%; height: 100%; overflow: hidden;  position: relative;");this.setOptions(d);this.create(this);u(this);r++}catch(c){throw new l("HxdGrid-> Grid initialization error. Detais: "+c);}};m.prototype={uid:0,domElem:null,resize:!0,
gridCellSize:80,gridCellsWidth:0,gridPadding:5,selector:".hxdItem",hiddenItems:[],cellOptions:{},setOptions:function(a){this.autocenter=a&&!1!==a.autocenter||!1;this.resize=a&&a.resize||this.resize;this.selector=a&&a.selector||this.selector;this.cellOptions.autoBind=a&&a.autoBind||!1;this.cellOptions.viewFade=a&&a.viewFade||!1},create:function(a){a.reflowLevel=0;a._boundaryWrap(a.domElem,a);for(var d=a.domElem.querySelectorAll(a.selector),b=0,c=d.length;b<c;b++)d[b].innerHTML=b,a.items[b]=new t(d[b],
a.cellOptions,a.gridCellSize);a.positionItems()},_boundaryWrap:function(a,d){this.gridCellsWidth=Math.floor(a.offsetWidth/this.gridCellSize);var b=w(a,"<div class='blockGrid' style='height: 100vh'>","</div>"),c=document.createEvent("Event");c.initEvent("dataavailable",!0,!0);v(b,"blockGrid").addEventListener(c,function(a,b){},!1)},resizeEvent:function(){console.log("resize");this.gridCellsWidth=Math.floor(this.domElem.offsetWidth/this.gridCellSize);this.positionItems()},positionItems:function(){var a=
0,d=0,b={},c,e=0;console.log("---------");for(var f=0,h=this.items.length;f<h;f++){if("undefined"!==typeof c)if(e=a,"undefined"!==typeof c[e])if(1<c[e].relH){if(b[a]={relW:c[e].relW,relH:Math.floor(c[e].relH)-1,yCor:c[e].yCor+(this.gridCellSize+this.gridPadding),xCor:c[e].xCor,i:"PseudoBlock"},d=c[e].yCor+this.gridCellSize+this.gridPadding,"PseudoBlock"!==c[e].i||2<=c[e].yCor){a=this.gridPadding+this.gridCellSize*c[e].relW+c[e].xCor;var e=this.gridCellSize,k=this.gridPadding,g=c[a];if("undefined"!==
typeof g)if(2<=g.relH)for(a=g.xCor+g.relW*e+k;"undefined"!==typeof c[a]&&2<c[a].relH;)g=c[a],a=g.xCor+g.relW*e+k;else a=g.xCor}}else d=c[e].yCor+c[e].relH*this.gridCellSize+this.gridPadding;else d=this.items[f-1].yCor;this.items[f].moveTo(a,d);b[a]={relW:this.items[f].relW,relH:this.items[f].relH,yCor:this.items[f].yCor,xCor:this.items[f].xCor,i:f};a=this.gridPadding+this.gridCellSize*this.items[f].relW+this.items[f].xCor;a>this.gridCellsWidth*this.gridCellSize&&(a=0,c=b,b={})}}};"undefined"!==typeof jQuery&&
(jQuery.fn.hxdGrid=function(a){var d=[];n(d);return this.each(function(b){d[b]=new m(this,a)})});window.hxdgrid=function(a,d){var b=[];n(b);for(var c=document.querySelectorAll(a),e=0,f=c.length;e<f;e++)b[e]=new m(c[e],d);return 1==f?b[0]:b};l.prototype=Error()})();
